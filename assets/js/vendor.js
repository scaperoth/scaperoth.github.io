!function(i,t,e){e.shinybox=function(s,n){var o,a={useCSS:!0,initialIndexOnArray:0,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"CCCCCC",beforeOpen:null,afterClose:null,closePlacement:"bottom",captionPlacement:"top",navigationPlacement:"bottom"},r=this,l=[],h=s.selector,d=e(h),c="undefined"!=typeof t.createTouch||"ontouchstart"in i||"onmsgesturechange"in i||navigator.msMaxTouchPoints,b=!!i.SVGSVGElement,u=i.innerWidth?i.innerWidth:e(i).width(),v=i.innerHeight?i.innerHeight:e(i).height(),y="";r.settings={},r.init=function(){r.settings=e.extend({},a,n);var t="",c="";"top"===r.settings.closePlacement?t+='<a id="shinybox-close"></a>':"bottom"===r.settings.closePlacement&&(c+='<a id="shinybox-close"></a>'),"top"===r.settings.captionPlacement?t+='<div id="shinybox-caption"></div>':"bottom"===r.settings.captionPlacement&&(c+='<div id="shinybox-caption"></div>'),"top"===r.settings.navigationPlacement?t+='<a id="shinybox-prev"></a><a id="shinybox-next"></a>':"bottom"===r.settings.navigationPlacement&&(c+='<a id="shinybox-prev"></a><a id="shinybox-next"></a>'),y='<div id="shinybox-overlay"><div id="shinybox-slider"></div><div id="shinybox-top">'+t+'</div><div id="shinybox-bottom">'+c+"</div></div>",e.isArray(s)?(l=s,m.target=e(i),m.init(r.settings.initialIndexOnArray)):d.click(function(i){l=[];var t,s,n;n||(s="rel",n=e(this).attr(s)),o=n&&""!==n&&"nofollow"!==n?d.filter("["+s+'="'+n+'"]'):e(h),o.each(function(){var i=null,t=null;e(this).attr("title")&&(i=e(this).attr("title")),e(this).attr("href")&&(t=e(this).attr("href")),l.push({href:t,title:i})}),t=o.index(e(this)),i.preventDefault(),i.stopPropagation(),m.target=e(i.target),m.init(t)})},r.refresh=function(){e.isArray(s)||(m.destroy(),o=e(h),m.actions())};var m={init:function(i){r.settings.beforeOpen&&r.settings.beforeOpen(),this.target.trigger("shinybox-start"),e.shinybox.isOpen=!0,this.build(),this.openSlide(i),this.openMedia(i),this.preloadMedia(i+1),this.preloadMedia(i-1)},build:function(){var i=this;if(e("body").append(y),i.doCssTrans()&&(e("#shinybox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),e("#shinybox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),e("#shinybox-bottom, #shinybox-top").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"})),b){var t=e("#shinybox-close").css("background-image");t=t.replace("png","svg"),e("#shinybox-prev,#shinybox-next,#shinybox-close").css({"background-image":t})}e.each(l,function(){e("#shinybox-slider").append('<div class="slide"></div>')}),i.setDim(),i.actions(),i.keyboard(),i.gesture(),i.animBars(),i.resize()},setDim:function(){var t,s,n={};"onorientationchange"in i?i.addEventListener("orientationchange",function(){0===i.orientation?(t=u,s=v):90!==i.orientation&&i.orientation!==-90||(t=v,s=u)},!1):(t=i.innerWidth?i.innerWidth:e(i).width(),s=i.innerHeight?i.innerHeight:e(i).height()),n={width:t,height:s},e("#shinybox-overlay").css(n),0===r.settings.hideBarsDelay?e("#shinybox-slider").css({top:"50px",height:s-100+"px"}):e("#shinybox-slider").css({top:0,height:"100%"})},resize:function(){var t=this;e(i).resize(function(){t.setDim()}).resize()},supportTransition:function(){for(var i="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),e=0;e<i.length;e+=1)if(void 0!==t.createElement("div").style[i[e]])return i[e];return!1},doCssTrans:function(){if(r.settings.useCSS&&this.supportTransition())return!0},gesture:function(){if(c){var i=this,t=null,s=10,n={},o={},a=e("#shinybox-top, #shinybox-bottom");a.addClass("visible-bars"),i.setTimeout(),e("body").bind("touchstart",function(i){return e(this).addClass("touching"),o=i.originalEvent.targetTouches[0],n.pageX=i.originalEvent.targetTouches[0].pageX,e(".touching").bind("touchmove",function(i){i.preventDefault(),i.stopPropagation(),o=i.originalEvent.targetTouches[0]}),!1}).bind("touchend",function(r){r.preventDefault(),r.stopPropagation(),t=o.pageX-n.pageX,t>=s?i.getPrev():t<=-s?i.getNext():a.hasClass("visible-bars")?(i.clearTimeout(),i.hideBars()):(i.showBars(),i.setTimeout()),e(".touching").off("touchmove").removeClass("touching")})}},setTimeout:function(){if(r.settings.hideBarsDelay>0){var t=this;t.clearTimeout(),t.timeout=i.setTimeout(function(){t.hideBars()},r.settings.hideBarsDelay)}},clearTimeout:function(){i.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var i=e("#shinybox-top, #shinybox-bottom");this.doCssTrans()?i.addClass("visible-bars"):(e("#shinybox-top").animate({top:0},500),e("#shinybox-bottom").animate({bottom:0},500),setTimeout(function(){i.addClass("visible-bars")},1e3))},hideBars:function(){var i=e("#shinybox-top, #shinybox-bottom");this.doCssTrans()?i.removeClass("visible-bars"):(e("#shinybox-top").animate({top:"-50px"},500),e("#shinybox-bottom").animate({bottom:"-50px"},500),setTimeout(function(){i.removeClass("visible-bars")},1e3))},animBars:function(){var i=this,t=e("#shinybox-top, #shinybox-bottom");t.addClass("visible-bars"),i.setTimeout(),e("#shinybox-slider").click(function(e){t.hasClass("visible-bars")||(i.showBars(),i.setTimeout())}),e("#shinybox-bottom").hover(function(){i.showBars(),t.addClass("force-visible-bars"),i.clearTimeout()},function(){t.removeClass("force-visible-bars"),i.setTimeout()})},keyboard:function(){var t=this;e(i).bind("keyup",function(i){i.preventDefault(),i.stopPropagation(),37===i.keyCode?t.getPrev():39===i.keyCode?t.getNext():27===i.keyCode&&t.closeSlide()})},actions:function(){var i=this;l.length<2?e("#shinybox-prev, #shinybox-next").hide():(e("#shinybox-prev").bind("click touchend",function(t){t.preventDefault(),t.stopPropagation(),i.getPrev(),i.setTimeout()}),e("#shinybox-next").bind("click touchend",function(t){t.preventDefault(),t.stopPropagation(),i.getNext(),i.setTimeout()})),e("#shinybox-close").bind("click touchend",function(t){i.closeSlide()}),e("#shinybox-slider .slide").bind("click",function(t){t.target===this&&i.closeSlide()})},setSlide:function(i,t){t=t||!1;var s=e("#shinybox-slider");this.doCssTrans()?s.css({left:100*-i+"%"}):s.animate({left:100*-i+"%"}),e("#shinybox-slider .slide").removeClass("current"),e("#shinybox-slider .slide").eq(i).addClass("current"),this.setTitle(i),t&&s.fadeIn(),e("#shinybox-prev, #shinybox-next").removeClass("disabled"),0===i?e("#shinybox-prev").addClass("disabled"):i===l.length-1&&e("#shinybox-next").addClass("disabled")},openSlide:function(t){e("html").addClass("shinybox"),e(i).trigger("resize"),this.setSlide(t,!0)},preloadMedia:function(i){var t=this,e=null;void 0!==l[i]&&(e=l[i].href),t.isVideo(e)?t.openMedia(i):setTimeout(function(){t.openMedia(i)},300)},openMedia:function(i){var t=this,s=null;if(void 0!==l[i]&&(s=l[i].href),i<0||i>=l.length)return!1;var n=e("#shinybox-slider .slide").eq(i);t.isVideo(s)?n.html(t.getVideo(s)):t.isPDF(s)?n.html(t.getPDF(s)):(n.html('<div class="loading"></div>'),t.loadMedia(s,function(){n.html(this)}))},setTitle:function(i,t){var s=null;e("#shinybox-caption").empty(),void 0!==l[i]&&(s=l[i].title),s&&e("#shinybox-caption").text(s)},isPDF:function(i){if(i&&i.match(/\.pdf(?:\?|$)/))return!0},getPDF:function(i){var t='<iframe src="'+i+'">';return'<div class="shinybox-pdf-container"><div class="shinybox-pdf">'+t+"</div></div>"},isVideo:function(i){if(i&&(i.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||i.match(/vimeo\.com\/([0-9]*)/)))return!0},getVideo:function(i){var t="",e=i.match(/watch\?v=([a-zA-Z0-9\-_]+)/),s=i.match(/vimeo\.com\/([0-9]*)/);return e?t='<iframe width="560" height="315" src="//www.youtube.com/embed/'+e[1]+'" frameborder="0" allowfullscreen></iframe>':s&&(t='<iframe width="560" height="315"  src="http://player.vimeo.com/video/'+s[1]+"?byline=0&amp;portrait=0&amp;color="+r.settings.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'),'<div class="shinybox-video-container" style="max-width:'+r.settings.videomaxWidth+'px"><div class="shinybox-video">'+t+"</div></div>"},loadMedia:function(i,t){if(!this.isVideo(i)){var s=e("<img>").on("load",function(){t.call(s)});s.attr("src",i)}},getNext:function(){var i=this,t=e("#shinybox-slider .slide").index(e("#shinybox-slider .slide.current"));t+1<l.length?(t+=1,i.setSlide(t),i.preloadMedia(t+1)):(e("#shinybox-slider").addClass("rightSpring"),setTimeout(function(){e("#shinybox-slider").removeClass("rightSpring")},500))},getPrev:function(){var i=e("#shinybox-slider .slide").index(e("#shinybox-slider .slide.current"));i>0?(i-=1,this.setSlide(i),this.preloadMedia(i-1)):(e("#shinybox-slider").addClass("leftSpring"),setTimeout(function(){e("#shinybox-slider").removeClass("leftSpring")},500))},closeSlide:function(){e("html").removeClass("shinybox"),e(i).trigger("resize"),this.destroy()},destroy:function(){e(i).unbind("keyup"),e("body").unbind("touchstart"),e("body").unbind("touchmove"),e("body").unbind("touchend"),e("#shinybox-slider").unbind(),e("#shinybox-overlay").remove(),e.isArray(s)||s.removeData("_shinybox"),this.target&&this.target.trigger("shinybox-destroy"),e.shinybox.isOpen=!1,r.settings.afterClose&&r.settings.afterClose()}};r.init()},e.fn.shinybox=function(i){if(!e.data(this,"_shinybox")){var t=new e.shinybox(this,i);this.data("_shinybox",t)}return this.data("_shinybox")}}(window,document,jQuery);